```{r}

```

---
output: # rmarkdown::github_document
  html_document:
  pdf_document: default
  word_document: default
title: "Assignment 3.  Working with Data Frame. Base R Style"
---

***Note*:** *This assignment practices working with Data Frame using Base R.*

***How to do it?***: 

- Open the Rmarkdown file of this assignment ([link](fa2021_assignment3.Rmd)) in Rstudio. 

- Right under each question, insert  a code chunk (you can use the hotkey `Ctrl + Alt + I` to add a code chunk) and code the solution for the question. 

- `Knit` the rmarkdown file (hotkey: `Ctrl + Alt + K`) to export an html.  

-  Publish the html file to your Githiub Page. 

***Submission***: Submit the link on Github of the assignment to Canvas under Assignment 3. 

-------

Problems
-------
 \

1. Create the following data frame

| Rank 	| Age 	| Name  	|
|------	|-----	|-------	|
| 0    	| 28  	| Tom   	|
| 1    	| 34  	| Jack  	|
| 2    	| 29  	| Steve 	|
| 3    	| 42  	| Ricky 	|
```{r}
df <- data.frame(Rank = c('0','1','2','3'), Age = c('28','34','29','42'), Name = c('Tom','Jack','Steve','Ricky'))
```


2. Use `read.csv` to import the Covid19 Vaccination data from WHO: [link](https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-states.csv)
```{r}
df <- read.csv('https://raw.githubusercontent.com/nytimes/covid-19-data/master/us-states.csv')
```

Show the names of the variables in the data
```
```{r}
names(df)
[1] "date"   "state"  "fips"   "cases"  "deaths"
```


```{r}
3. How many columns and rows the data have?
```
```{r}
> str(df)
'data.frame':	30924 obs. of  5 variables:
 $ date  : chr  "2020-01-21" "2020-01-22" "2020-01-23" "2020-01-24" ...
 $ state : chr  "Washington" "Washington" "Washington" "Illinois" ...
 $ fips  : int  53 53 53 17 53 6 17 53 4 6 ...
 $ cases : int  1 1 1 1 1 1 1 1 1 2 ...
 $ deaths: int  0 0 0 0 0 0 0 0 0 0 ...
```

```{r}

4. How many missing values are there?  Show the missing values by columns.  What variable has the most number of missing values?

```{r}
sum(is.na(df))
[1] 0

colSums(is.na(df))
  date  state   fips  cases deaths 
     0      0      0      0      0 
```



5. What is the class of the `date` column. Change the `date` columns to `date` type using the `as.Date` function. Show the new class of the `date` column. 
```{r}
> class(df$date)
[1] "character"
> df$date = as.Date(df$date)
> class(df$date)
[1] "Date"
```


6. Capitalize the names of all the variables
```{r}
> names(df)[1] <- 'Date'
> names(df)[2] <- 'State'
> names(df)[3] <- 'Fips'
> names(df)[4] <- 'Cases'
> names(df)[5] <- 'Deaths'
```

7. Find the average number of cases per day. Find the maximum cases a day.  
```{r}
mean(df$Cases, na.rm=TRUE)
[1] 321227.6

> max(df$Cases, na.rm=TRUE)
[1] 4616854
```

8. How many states are there in the data?  
```{r}
table(df$State)

                 Alabama                   Alaska                  Arizona 
                     552                      553                      599 
                Arkansas               California                 Colorado 
                     554                      600                      560 
             Connecticut                 Delaware     District of Columbia 
                     557                      554                      558 
                 Florida                  Georgia                     Guam 
                     564                      563                      550 
                  Hawaii                    Idaho                 Illinois 
                     559                      552                      601 
                 Indiana                     Iowa                   Kansas 
                     559                      557                      558 
                Kentucky                Louisiana                    Maine 
                     559                      556                      553 
                Maryland            Massachusetts                 Michigan 
                     560                      593                      555 
               Minnesota              Mississippi                 Missouri 
                     559                      554                      558 
                 Montana                 Nebraska                   Nevada 
                     552                      577                      560 
           New Hampshire               New Jersey               New Mexico 
                     563                      561                      554 
                New York           North Carolina             North Dakota 
                     564                      562                      554 
Northern Mariana Islands                     Ohio                 Oklahoma 
                     537                      556                      559 
                  Oregon             Pennsylvania              Puerto Rico 
                     566                      559                      552 
            Rhode Island           South Carolina             South Dakota 
                     564                      559                      555 
               Tennessee                    Texas                     Utah 
                     560                      582                      569 
                 Vermont           Virgin Islands                 Virginia 
                     558                      551                      558 
              Washington            West Virginia                Wisconsin 
                     604                      548                      589 
                 Wyoming 
                     554 
                    

```


9. Create a new variable `weekdays` to store the weekday for each rows. 
```{r}
df$Weekdays <- cut(df$Date, breaks = c(Monday, Friday, Saturday, Sunday), labels = 'Weekday','Weekend'))
```

10. Create the categorical variable `death2` variable taking the values as follows

- `has_death` if there is a death that day
-  `no_death` if there is no death that day
```{r}
df$Death2 <- ifelse(df$Deaths==0, 'no_death','has_death')
```

Find the frequency and relative frequency of `no_death` and `has_death`. 
```{r}
> frequency(df$Death2 <- 'has_death')
[1] 1
> frequency(df$Death2 <- 'no_death')
[1] 1
```


11. Find the first quartile (Q1), second quartile (Q2) and and third quartile (Q3) of the variable `death`. (Hint:  Use the `summary` function)
```{r}
> summary(df$Deaths)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
      0     359    2063    6140    7330   67647 
```


12. Create the categorical variable `death3` variable taking the values as follows

- `low_death` if the number of deaths smaller than the 25 percentile (Q1)

- `mid_death` if the number of deaths from Q1 to Q3

- `high_death` if the number of deaths greater than Q3
```{r}
 df$Death3 <- cut(df$Death3, breaks=c(0,359,7330,67647), labels=c('low_death','mid_death','high_death'))
```


13. Find the average cases in Rhode Island in 2021 
```{r}
df$State: Rhode Island
[1] 77494.06
```

14. Find the median cases by weekdays in Rhode Island in 2021 
```{r}
> median(df$Cases)
[1] 110513.5
```

15. Compare the median cases in Rhode Island in June, July, August and September.
```{r}
summary(df$Cases)
   Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
      1   16529  110514  321228  406439 4616854 
```

